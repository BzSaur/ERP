<!-- Bienvenida -->
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="mb-1">¡Bienvenido, <%= user ? user.Nombre_Completo.split(' ')[0] : 'Usuario' %>!</h2>
    <p class="text-muted mb-0">Panel de control del sistema de Recursos Humanos</p>
  </div>
  <div class="d-none d-md-block">
    <span class="text-muted"><i class="bi bi-calendar3 me-1"></i> <%= new Date().toLocaleDateString('es-MX', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %></span>
  </div>
</div>

<!-- Dashboard Stats -->
<div class="row g-3 mb-4">
  <!-- Total Empleados -->
  <div class="col-6 col-lg-3">
    <div class="card stat-card bg-primary">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="stat-label">Total Empleados</div>
            <div class="stat-value"><%= estadisticas.totalEmpleados %></div>
          </div>
          <i class="bi bi-people-fill stat-icon"></i>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Empleados Activos -->
  <div class="col-6 col-lg-3">
    <div class="card stat-card bg-success">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="stat-label">Activos</div>
            <div class="stat-value"><%= estadisticas.empleadosActivos %></div>
          </div>
          <i class="bi bi-person-check-fill stat-icon"></i>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Áreas -->
  <div class="col-6 col-lg-3">
    <div class="card stat-card bg-info">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="stat-label">Áreas</div>
            <div class="stat-value"><%= estadisticas.totalAreas %></div>
          </div>
          <i class="bi bi-diagram-3-fill stat-icon"></i>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Puestos -->
  <div class="col-6 col-lg-3">
    <div class="card stat-card bg-warning">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="stat-label">Puestos</div>
            <div class="stat-value"><%= estadisticas.totalPuestos %></div>
          </div>
          <i class="bi bi-briefcase-fill stat-icon"></i>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Quick Actions & Recent -->
<div class="row g-4">
  <!-- Acciones Rápidas -->
  <div class="col-lg-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="card-title mb-0">
          <i class="bi bi-lightning-fill text-warning me-2"></i>
          Acciones Rápidas
        </h5>
      </div>
      <div class="card-body">
        <div class="d-grid gap-2">
          <a href="/empleados/crear" class="btn btn-outline-primary">
            <i class="bi bi-person-plus me-2"></i>Nuevo Empleado
          </a>
          <a href="/horas-adicionales/crear" class="btn btn-outline-info">
            <i class="bi bi-clock-history me-2"></i>Registrar Horas
          </a>
          <a href="/areas/crear" class="btn btn-outline-success">
            <i class="bi bi-folder-plus me-2"></i>Nueva Área
          </a>
          <a href="/puestos/crear" class="btn btn-outline-warning">
            <i class="bi bi-briefcase me-2"></i>Nuevo Puesto
          </a>
          <a href="/reportes" class="btn btn-outline-secondary">
            <i class="bi bi-bar-chart me-2"></i>Ver Reportes
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Últimos Empleados -->
  <div class="col-lg-8">
    <div class="card h-100">
      <div class="card-header d-flex justify-content-between align-items-center flex-wrap gap-2">
        <h5 class="card-title mb-0">
          <i class="bi bi-clock-history text-primary me-2"></i>
          Últimos Empleados
        </h5>
        <a href="/empleados" class="btn btn-sm btn-primary">Ver todos</a>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Nombre</th>
                <th class="d-none d-md-table-cell">Área</th>
                <th class="d-none d-sm-table-cell">Puesto</th>
                <th>Estatus</th>
              </tr>
            </thead>
            <tbody>
              <% if (ultimosEmpleados && ultimosEmpleados.length > 0) { %>
                <% ultimosEmpleados.forEach(function(emp) { %>
                <tr>
                  <td>
                    <strong><%= emp.Nombre %> <%= emp.Apellido_Paterno %></strong>
                  </td>
                  <td class="d-none d-md-table-cell"><%= emp.area ? emp.area.Nombre_Area : '-' %></td>
                  <td class="d-none d-sm-table-cell"><%= emp.puesto ? emp.puesto.Nombre_Puesto : '-' %></td>
                  <td>
                    <span class="badge <%= emp.estatus && (emp.estatus.Nombre_Estatus === 'ACTIVO' || emp.estatus.Nombre_Estatus === 'Activo') ? 'bg-success' : 'bg-secondary' %>">
                      <%= emp.estatus ? emp.estatus.Nombre_Estatus : '-' %>
                    </span>
                  </td>
                </tr>
                <% }); %>
              <% } else { %>
                <tr>
                  <td colspan="4" class="text-center text-muted py-4">
                    <i class="bi bi-people fs-1 d-block mb-2"></i>
                    No hay empleados registrados
                  </td>
                </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
