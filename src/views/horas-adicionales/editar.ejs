<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="mb-1">Editar Horas Adicionales</h2>
    <p class="text-muted mb-0">Modificar registro de horas</p>
  </div>
  <a href="/horas-adicionales" class="btn btn-outline-secondary">
    <i class="bi bi-arrow-left me-1"></i> Volver
  </a>
</div>

<% if (typeof messages !== 'undefined' && messages.error) { %>
  <div class="alert alert-danger alert-dismissible fade show">
    <i class="bi bi-exclamation-circle me-2"></i><%= messages.error %>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
  </div>
<% } %>

<div class="card">
  <div class="card-body">
    <form action="/horas-adicionales/<%= horaAdicional.ID_Horas %>?_method=PUT" method="POST">
      <div class="row g-3">
        <div class="col-md-6">
          <label for="ID_Empleado" class="form-label">Empleado *</label>
          <select class="form-select" id="ID_Empleado" name="ID_Empleado" required>
            <option value="">Seleccionar empleado...</option>
            <% empleados.forEach(emp => { %>
              <option value="<%= emp.ID_Empleado %>" <%= horaAdicional.ID_Empleado === emp.ID_Empleado ? 'selected' : '' %>>
                <%= emp.Nombre %> <%= emp.Apellido_Paterno %> <%= emp.Apellido_Materno || '' %>
              </option>
            <% }) %>
          </select>
        </div>
        
        <div class="col-md-3">
          <label for="Fecha" class="form-label">Fecha *</label>
          <input type="date" class="form-control" id="Fecha" name="Fecha" required
                 value="<%= horaAdicional.Fecha.toISOString().split('T')[0] %>">
        </div>
        
        <div class="col-md-3">
          <label for="Tipo_Hora" class="form-label">Tipo de Hora *</label>
          <select class="form-select" id="Tipo_Hora" name="Tipo_Hora" required>
            <option value="PRESENCIAL" <%= horaAdicional.Tipo_Hora === 'PRESENCIAL' ? 'selected' : '' %>>Presencial</option>
            <option value="EN_LINEA" <%= horaAdicional.Tipo_Hora === 'EN_LINEA' ? 'selected' : '' %>>En Línea</option>
            <option value="EXTRA" <%= horaAdicional.Tipo_Hora === 'EXTRA' ? 'selected' : '' %>>Extra (1.5x)</option>
            <option value="DOBLE" <%= horaAdicional.Tipo_Hora === 'DOBLE' ? 'selected' : '' %>>Doble (2x)</option>
            <option value="TRIPLE" <%= horaAdicional.Tipo_Hora === 'TRIPLE' ? 'selected' : '' %>>Triple (3x)</option>
          </select>
        </div>
        
        <div class="col-md-3">
          <label for="Cantidad_Horas" class="form-label">Cantidad de Horas *</label>
          <input type="number" class="form-control" id="Cantidad_Horas" name="Cantidad_Horas" 
                 required min="0.5" max="24" step="0.5" 
                 value="<%= Number(horaAdicional.Cantidad_Horas) %>">
        </div>
        
        <div class="col-md-9">
          <label for="Descripcion" class="form-label">Descripción</label>
          <textarea class="form-control" id="Descripcion" name="Descripcion" rows="2"><%= horaAdicional.Descripcion || '' %></textarea>
        </div>
      </div>
      
      <hr class="my-4">
      
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">
          <i class="bi bi-check-lg me-1"></i> Actualizar
        </button>
        <a href="/horas-adicionales" class="btn btn-outline-secondary">Cancelar</a>
      </div>
    </form>
  </div>
</div>
